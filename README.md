# Cloud-Computing - API

## Technology Stack

Maven + MVC + Jersey + JAX-RS + RESTful 



## API Server

### Document Structure

```
├── src                                               
│   └── main                                          
│       ├── java                                      // source folder
│       │   ├── team06.test.dao                       // connect with database
│       │   │   ├── IUserDao.java                     // interface
│       │   │   └── impl                              // implement
│       │   │       └── UserDaoImpl.java
│       │   │
│       │   ├── team06.test.domain                    // JavaBean within context scope
│       │   │   └── User.java
│       │   │
│       │   ├── team06.test.service                   // business logic
│       │   │   ├── IUserService.java
│       │   │   └── impl
│       │   │       └── UserServiceImpl.java
│       │   │
│       │   ├── team06.test.utils                     // util package
│       │   │   └── JdbcUtils.java
│       │   │
│       │   ├── team06.test.web.API                   // API Servlet
│       │   │   └── testAPIServlet.java
│       │   │
│       │   ├── team06.test.web.bean                  // JavaBean within page scope
│       │   │   └── UserBean.java
│       │   │
│       │   └── HelloServlet.java                     // display all users in database
│       │
│       └── webapp                                    // web application
│           ├── META-INF
│           │   └── context.xml
│           ├── WEB-INF
│           │   └── web.xml
│           └── index.jsp
│
├── target                                            // generated by maven
│   ├── classes 
│   ├── generated-sources 
│   ├── maven-archiver 
│   ├── maven-status 
│   ├── test 
│   └── test.war                                      // war file 
│
└── pom.xml                                           // maven
```



### testAPIServlet.java

- `sayHello()`: provide the API service. 
  - URL: `http://ip:port/test/api/user/login`
  - Read `username` and `password` from POST data. 
  - Send them to `UserServiceImpl.getUserByUsername()` to validate it.
  - If `username` is not existed in database, return 0. (temporary, maybe change to string) 
  - If `password` is not the same as the one in database, return 1. (temporary, maybe change to string) 
  - If both is correct, return `userid`and `username`.
- `sayXMLHello()` and `sayHtmlHello()`: example.
  - URL: `http://ip:port/test/api/user`



### /src/main/webapp/META-INF/context.xml

- Obtain infomation about connecting with database



### /src/main/webapp/WEB-INF/web.xml

- Intercept URL looks like  `/api/*`.

- <font color=red>All the java file provided API should be under, for example,  `team06.test.web.API` .</font> It is in `<param-value>YOUR API FOLDER</param-value>`.

  ```
  <servlet>
      <servlet-name>JAX-RS Servlet</servlet-name>
      <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
      <init-param>
        <param-name>jersey.config.server.provider.packages</param-name>
        <param-value>team06.test.web.API</param-value>
      </init-param>
  
      <load-on-startup>1</load-on-startup>
    </servlet>
  ```

  